<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>安装 | yh的学习文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/notes/assets/css/0.styles.aa6162e3.css" as="style"><link rel="preload" href="/notes/assets/js/app.cb21c81c.js" as="script"><link rel="preload" href="/notes/assets/js/2.c60e90e7.js" as="script"><link rel="preload" href="/notes/assets/js/13.b336f361.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.27c66276.js"><link rel="prefetch" href="/notes/assets/js/11.67c44fc6.js"><link rel="prefetch" href="/notes/assets/js/12.a07807d3.js"><link rel="prefetch" href="/notes/assets/js/14.ae94b847.js"><link rel="prefetch" href="/notes/assets/js/15.16690d50.js"><link rel="prefetch" href="/notes/assets/js/16.5d640bd3.js"><link rel="prefetch" href="/notes/assets/js/17.ef2758f7.js"><link rel="prefetch" href="/notes/assets/js/18.503cbf04.js"><link rel="prefetch" href="/notes/assets/js/19.6eef566b.js"><link rel="prefetch" href="/notes/assets/js/20.931a90bb.js"><link rel="prefetch" href="/notes/assets/js/21.14c7ae29.js"><link rel="prefetch" href="/notes/assets/js/22.c55be918.js"><link rel="prefetch" href="/notes/assets/js/23.25c28f80.js"><link rel="prefetch" href="/notes/assets/js/24.e6dbe7b7.js"><link rel="prefetch" href="/notes/assets/js/25.dfbefe87.js"><link rel="prefetch" href="/notes/assets/js/26.54a7bfa0.js"><link rel="prefetch" href="/notes/assets/js/27.b90b577d.js"><link rel="prefetch" href="/notes/assets/js/28.e4b31cbf.js"><link rel="prefetch" href="/notes/assets/js/29.32faee26.js"><link rel="prefetch" href="/notes/assets/js/3.efae5e97.js"><link rel="prefetch" href="/notes/assets/js/30.66739de0.js"><link rel="prefetch" href="/notes/assets/js/31.c2e0ce44.js"><link rel="prefetch" href="/notes/assets/js/32.f0a528e7.js"><link rel="prefetch" href="/notes/assets/js/33.e099a3f3.js"><link rel="prefetch" href="/notes/assets/js/34.3e410cbe.js"><link rel="prefetch" href="/notes/assets/js/35.724b6bb5.js"><link rel="prefetch" href="/notes/assets/js/4.b7d0708f.js"><link rel="prefetch" href="/notes/assets/js/5.9e2f4ca7.js"><link rel="prefetch" href="/notes/assets/js/6.c7b54f12.js"><link rel="prefetch" href="/notes/assets/js/7.03139e79.js"><link rel="prefetch" href="/notes/assets/js/8.fb5a3d35.js"><link rel="prefetch" href="/notes/assets/js/9.235de68a.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.aa6162e3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><!----> <span class="site-name">yh的学习文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础知识扩展</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>http</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>react</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/react/newReact.html" class="sidebar-link">react</a></li><li><a href="/notes/react/react-store.html" class="sidebar-link">react-store</a></li><li><a href="/notes/react/react-router.html" aria-current="page" class="active sidebar-link">react-router</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#标签组件" class="sidebar-link">标签组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#browerrouter" class="sidebar-link">BrowerRouter</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#hashrouter" class="sidebar-link">HashRouter</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#link" class="sidebar-link">Link</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#navlink" class="sidebar-link">NavLink</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#routes" class="sidebar-link">Routes</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#route" class="sidebar-link">Route</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#navigate" class="sidebar-link">Navigate</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#outlet" class="sidebar-link">Outlet</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#demo" class="sidebar-link">demo</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#嵌套路由" class="sidebar-link">嵌套路由</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#路由表" class="sidebar-link">路由表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#配置" class="sidebar-link">配置</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#路由懒加载" class="sidebar-link">路由懒加载</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#hooks" class="sidebar-link">Hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#useparams" class="sidebar-link">useParams</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#usesearchparams" class="sidebar-link">useSearchParams</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#uselocation" class="sidebar-link">useLocation</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#usenavigate" class="sidebar-link">useNavigate</a></li><li class="sidebar-sub-header"><a href="/notes/react/react-router.html#usematch" class="sidebar-link">useMatch</a></li></ul></li></ul></li><li><a href="/notes/react/react-native.html" class="sidebar-link">react-native</a></li></ul></section></li><li><a href="/notes/typescript/ts.html" class="sidebar-link">typescript</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具类</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> react-router-dom
<span class="token comment"># yarn add react-router-dom</span>
</code></pre></div><h2 id="标签组件"><a href="#标签组件" class="header-anchor">#</a> 标签组件</h2> <h3 id="browerrouter"><a href="#browerrouter" class="header-anchor">#</a> <code>BrowerRouter</code></h3> <ul><li>基于<code>&lt;BrowerRouter&gt;</code>把所有要渲染的内容包起来，开启 History 路由</li> <li>后续用到的<code>Route</code>、<code>Link</code>等，都需要在该标签内部使用</li></ul> <h4 id="props"><a href="#props" class="header-anchor">#</a> props</h4> <ul><li><p><code>basename</code>：有前置斜杠，不能有后置斜杠。</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">BrowserRouter</span></span> <span class="token attr-name">basename</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/calendar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
 	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/today<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text"> 
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">BrowserRouter</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">// link 渲染为 &lt;a href=&quot;/calendar/today&quot;&gt;</span>
</code></pre></div></li> <li><p><code>getUserCOnfirmation</code>：路由跳转的二次确认函数，用来拦截Prompt组件，默认情况下使用<code>window.confirm</code>弹框  <strong>需要配合Prompt一起使用，没有Prompt不会弹出</strong></p></li> <li><p><code>forceRefresh</code>：布尔值。为true时, router在进行路由跳转的时候会进行页面刷新。<strong>可能只在浏览器不支持H5 history api的情况下需要使用。</strong></p></li> <li><p><code>keyLength</code>：自定义location.key的长度，默认为6  <strong>？？？？？？？</strong></p></li> <li><p><code>children</code>：需要渲染的<strong>单个reactNode元素组件</strong></p></li></ul> <h3 id="hashrouter"><a href="#hashrouter" class="header-anchor">#</a> <code>HashRouter</code></h3> <ul><li>基于<code>&lt;HashRouter&gt;</code>把所有要渲染的内容包起来，开启 Hash路由</li> <li>开启后，整个页面地址，默认会设置一个 <code>#/</code>哈希值</li></ul> <h4 id="props-2"><a href="#props-2" class="header-anchor">#</a> props</h4> <ul><li><code>basename</code></li> <li><code>getUserConfirmation</code></li> <li><code>hashType</code>：string，
<ul><li><code>slash</code>:  创建像#/和的哈希#/sunshine/lollipops，默认</li> <li><code>noslash</code> : 创建像#和的哈希#sunshine/lollipops</li></ul></li> <li><code>children</code></li></ul> <h3 id="link"><a href="#link" class="header-anchor">#</a> <code>Link</code></h3> <ul><li>实现路由切换/跳转的组件</li> <li>最后渲染的结果是<code>&lt;a&gt;</code>标签</li> <li>可以根据路由模式，自动设定点击的切换方式『Hash模式为 /#/a，History模式为/a』</li></ul> <h4 id="props-3"><a href="#props-3" class="header-anchor">#</a> props</h4> <ul><li><p><code>to</code>: 跳转的地址</p></li> <li><p><code>replace</code>： 布尔值- 为true时，将会替换history stack中的当前路径</p></li></ul> <h3 id="navlink"><a href="#navlink" class="header-anchor">#</a> <code>NavLink</code></h3> <p><code>&lt;Link&gt;</code> 的特殊版本，当匹配当前URL时，会给当前link添加样式。</p> <ul><li><code>activeClassName</code>：选中时添加的类名，默认为<code>active</code></li> <li><code>activeStyle</code>：对象，样式</li> <li><code>exact</code></li> <li><code>strict</code>：布尔值，为true时，当进行路由匹配时，后置斜杠将会被考虑在内</li> <li><code>isActive</code>：func。额外函数来进一步验证当前路由是否匹配</li></ul> <h3 id="routes"><a href="#routes" class="header-anchor">#</a> <code>Routes</code></h3> <ul><li>v6版本中移除了先前的<code>&lt;Switch&gt;</code>，引入了新的替代者：<code>&lt;Routes&gt;</code></li> <li><code>&lt;Routes&gt;</code> 和 <code>&lt;Route&gt;</code>要配合使用，且必须要用<code>&lt;Routes&gt;</code>包裹<code>&lt;Route&gt;</code></li> <li>匹配到一次后停止匹配</li></ul> <h3 id="route"><a href="#route" class="header-anchor">#</a> <code>Route</code></h3> <ul><li><p><strong>版本6 外层必须包裹一层<code>&lt;Routes&gt;</code></strong></p></li> <li><p>路由容器，每一次页面加载或者切换路由后，都会根据当前路由，到这里和每一个Route进行匹配，把匹配到的组件放在容器中渲染</p></li></ul> <h4 id="props-4"><a href="#props-4" class="header-anchor">#</a> props</h4> <ul><li><p><code>path</code>：与URL匹配的路径模式</p> <ul><li>动态路径  <code>path=/a/:id/:name</code> 保存在<code>params</code>属性中</li></ul></li> <li><p><code>element</code>: 当路由与URL匹配时要呈现的元素</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/a<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">A</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p><code>Component</code>: 当路由与URL匹配时要呈现的组件</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/a<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token constant">A</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p><code>caseSensitive</code>： 是否匹配大小写</p></li> <li><p><code>loader</code>： 路由加载器在路由渲染之前被调用，通过<code>useLoaderData</code>为元素提供数据。</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span>
  <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/teams/:teamId<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">loader</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> params <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fetchTeam</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>teamId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Team</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> team <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="navigate"><a href="#navigate" class="header-anchor">#</a> <code>Navigate</code></h3> <ul><li>v6版本中使用 <code>&lt;Navigate&lt;</code> 替换原来的 <code>&lt;Redirect&gt;</code> 组件</li> <li>在渲染时改变当前位置</li></ul> <h4 id="props-5"><a href="#props-5" class="header-anchor">#</a> props</h4> <ul><li><code>to</code>: 调整到哪个URL</li> <li><code>replace</code>: 是否替换URL</li> <li><code>state</code>: 传递state参数，存在<code>location.state</code>中</li></ul> <h3 id="outlet"><a href="#outlet" class="header-anchor">#</a> Outlet</h3> <ul><li>嵌套路由中使用</li> <li>在父路由元素中来渲染他们的子路由元素</li></ul> <h3 id="demo"><a href="#demo" class="header-anchor">#</a> demo</h3> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> HashRouter<span class="token punctuation">,</span> BrowserRouter<span class="token punctuation">,</span> Link<span class="token punctuation">,</span> NavLink<span class="token punctuation">,</span> Routes<span class="token punctuation">,</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">&quot;styled-components&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token constant">A</span> <span class="token keyword">from</span> <span class="token string">&quot;./A&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token constant">B</span> <span class="token keyword">from</span> <span class="token string">&quot;./B&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token constant">C</span> <span class="token keyword">from</span> <span class="token string">&quot;./C&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> NavBox <span class="token operator">=</span> styled<span class="token punctuation">.</span>nav<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    a {
        font-size: 16px;
        color: black;
        margin: 0 10px;
    }
</span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">RouterApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HashRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavBox</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/a<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">A</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/b<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">B</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/c<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">C</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavBox</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/a<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">A</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/b<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token constant">B</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/c<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token constant">C</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">404</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">HashRouter</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="嵌套路由"><a href="#嵌套路由" class="header-anchor">#</a> 嵌套路由</h2> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// 这是个三级嵌套的路由</span>
<span class="token comment">// v6版本要求所有路由统一写在一起</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/a<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">A</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/a/b<span class="token punctuation">'</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">A/B内容: </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">B</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/a/b/c<span class="token punctuation">'</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">A/B/C内容: </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>c</span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Route</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Route</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Route</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">// Link写在对应组件中</span>
<span class="token comment">// Outlet是子路由的出口组件，子组件在Outlet的位置渲染</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> Outlet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        A组件内容
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/a/b<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">A/B</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Outlet</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="路由表"><a href="#路由表" class="header-anchor">#</a> 路由表</h2> <p>对多级路由进行统一管理</p> <h3 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h3> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Navigate<span class="token punctuation">,</span> useRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> lazy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'@/views/campus'</span><span class="token punctuation">;</span>

<span class="token comment">// 路由懒加载</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleLazy</span> <span class="token operator">=</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> Comp <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">@/views/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//element需要传入&lt;Element /&gt;这种形式，与component不同</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading..</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">&lt;Comp /&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        element<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Home</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
        children<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                element<span class="token operator">:</span> <span class="token function">handleLazy</span><span class="token punctuation">(</span><span class="token string">'overview'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                path<span class="token operator">:</span> <span class="token string">'overview'</span><span class="token punctuation">,</span>
                element<span class="token operator">:</span> <span class="token function">handleLazy</span><span class="token punctuation">(</span><span class="token string">'overview'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                path<span class="token operator">:</span> <span class="token string">'comprehensive'</span><span class="token punctuation">,</span>
                element<span class="token operator">:</span> <span class="token function">handleLazy</span><span class="token punctuation">(</span><span class="token string">'comprehensive'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
        element<span class="token operator">:</span> <span class="token function">handleLazy</span><span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/404'</span><span class="token punctuation">,</span>
        element<span class="token operator">:</span> <span class="token function">handleLazy</span><span class="token punctuation">(</span><span class="token string">'404'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span>
        element<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Navigate</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/404<span class="token punctuation">'</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">useRoutes</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> RouteView <span class="token keyword">from</span> <span class="token string">'@/router'</span><span class="token punctuation">;</span> 

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">RouteView</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">observer</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="路由懒加载"><a href="#路由懒加载" class="header-anchor">#</a> 路由懒加载</h3> <ul><li><p><code>lazy</code>: <code>lazy(() =&gt; import(组件路径))</code></p></li> <li><p><code>Suspense</code>：组件未加载完成时的过渡样式</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading..</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">&lt;Component /&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h2 id="hooks"><a href="#hooks" class="header-anchor">#</a> Hooks</h2> <p>路由相关的hook方法</p> <h3 id="useparams"><a href="#useparams" class="header-anchor">#</a> <code>useParams</code></h3> <ul><li>返回一个由当前URL的动态参数的键/值对组成的对象</li></ul> <h3 id="usesearchparams"><a href="#usesearchparams" class="header-anchor">#</a> useSearchParams</h3> <ul><li><p>获取search参数</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>search<span class="token punctuation">,</span> setsearch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>search<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>search<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="uselocation"><a href="#uselocation" class="header-anchor">#</a> <code>useLocation</code></h3> <ul><li>返回当前的<code>location</code>对象</li> <li>常用于监听URL变化</li></ul> <h3 id="usenavigate"><a href="#usenavigate" class="header-anchor">#</a> <code>useNavigate</code></h3> <ul><li><p>返回一个函数，让你以编程方式进行导航</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useNavigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">PageA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeMenu</span> <span class="token operator">=</span> <span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">navigate</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">{</span>replace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> state<span class="token operator">:</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token string">'123'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>menuStyle<span class="token punctuation">[</span><span class="token string">'menu-wrap'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            菜单：
            </span><span class="token punctuation">{</span>
                menuStore<span class="token punctuation">.</span>menuData<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>menuItem<span class="token operator">:</span> MenuItem<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
                        <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">menu-item</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>curretMenu <span class="token operator">===</span> menuItem<span class="token punctuation">.</span>path <span class="token operator">?</span> <span class="token string">' active'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span>
                        <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>menuItem<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span>
                        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">changeMenu</span><span class="token punctuation">(</span>menuItem<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
                    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
                        </span><span class="token punctuation">{</span>menuItem<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="usematch"><a href="#usematch" class="header-anchor">#</a> <code>useMatch</code></h3> <ul><li><p>返回相对于当前URL的给定路径上的路由的匹配数据</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token function">useMatch</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
</code></pre></div><p>![image-20230912175018195](/notes/imgs/react/react-router-dom hooks数据返回.png)</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/react/react-store.html" class="prev">
        react-store
      </a></span> <span class="next"><a href="/notes/react/react-native.html">
        react-native
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notes/assets/js/app.cb21c81c.js" defer></script><script src="/notes/assets/js/2.c60e90e7.js" defer></script><script src="/notes/assets/js/13.b336f361.js" defer></script>
  </body>
</html>
