(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{413:function(t,a,s){"use strict";s.r(a);var e=s(56),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"从vue2中迁移"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从vue2中迁移"}},[t._v("#")]),t._v(" 从vue2中迁移")]),t._v(" "),s("h3",{attrs:{id:"v-for中的ref数组"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#v-for中的ref数组"}},[t._v("#")]),t._v(" v-for中的Ref数组")]),t._v(" "),s("ul",[s("li",[t._v("在 "),s("strong",[t._v("vue 2")]),t._v(" 中，如果给 v-for 绑定一个 ref ，通过这个 ref 可以获取到全部 v-for 的节点。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<p v-for="item in renderData" :key="item.name" ref="nodes">{{item.name}}</p>\n// this.$refs.nodes拿到的结果是一个数组，包含所有的p元素，获取某个节点时可以通过index或者过滤方式\n')])])]),s("ul",[s("li",[t._v("在 "),s("strong",[t._v("vue 3")]),t._v(" 中，对 v-for 的一体化（数组化）处理已经取消，变为函数处理 ref 。如果像vue2一样绑定，只能获取最后一个节点。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('// html\n<p v-for="item in renderData" :key="item.name" ref="handleNodes">{{item.name}}</p>\n\n// js\nhandleNodes(el) {\n\tthis.nodesRef.push(el)\n}\n')])])]),s("blockquote",[s("p",[t._v("注意：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("nodesRef")]),t._v(" 不必是数组：它也可以是一个对象，其 ref 会通过迭代的 key 被设置。")]),t._v(" "),s("li",[t._v("如果需要，"),s("code",[t._v("nodesRef")]),t._v(" 也可以是响应式的且可以被监听")])])]),t._v(" "),s("h3",{attrs:{id:"异步组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异步组件"}},[t._v("#")]),t._v(" 异步组件")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("异步组件的定义需要通过将其包裹在新的 "),s("code",[t._v("defineAsyncComponent")]),t._v(" 助手方法中来显式地定义")]),t._v(" "),s("p",[s("code",[t._v("vue2: const asyncModal = () => import('./Modal.vue')")])]),t._v(" "),s("p",[s("code",[t._v("vue3: const asyncModal = defineAsyncComponent(() => import('./Modal.vue'))")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("带选项的异步组件中")]),s("code",[t._v("component")]),t._v(" 选项重命名为 "),s("code",[t._v("loader")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const asyncModalWithOptions = defineAsyncComponent({\n  // vue2中用的是component，vue3中改为了loader\n  loader: () => import('./Modal.vue'),\n  delay: 200,\n  timeout: 3000,\n  errorComponent: ErrorComponent,\n  loadingComponent: LoadingComponent\n})\n")])])])]),t._v(" "),s("li",[s("p",[t._v("Loader 函数本身不再接收 "),s("code",[t._v("resolve")]),t._v(" 和 "),s("code",[t._v("reject")]),t._v(" 参数，且必须返回一个 Promise")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// 2.x 版本\nconst oldAsyncComponent = (resolve, reject) => {\n  /* ... */\n}\n\n// 3.x 版本\nconst asyncComponent = defineAsyncComponent(\n  () =>\n    new Promise((resolve, reject) => {\n      /* ... */\n    })\n)\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"attrs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#attrs"}},[t._v("#")]),t._v(" $attrs")]),t._v(" "),s("p",[s("strong",[t._v("vue2")]),t._v("中，$attrs 不包含 class  和  style")]),t._v(" "),s("p",[t._v("导致的问题")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<my-component id="my-id" class="my-class"></my-component>\n// my-component\n<template>\n  <label>\n    <input type="text" v-bind="$attrs" />\n  </label>\n</template>\n<script>\nexport default {\n  inheritAttrs: false\n}\n<\/script>\n\n// 生成的html代码\n// 由于$attrs不包含class，仍然会应用到组件的根元素\n<label class="my-class">\n  // $attrs 中的 attribute 不再自动添加到根元素中，而是由开发者决定在哪添加\n  <input type="text" id="my-id" />\n</label>\n')])])]),s("p",[s("strong",[t._v("vue3")]),t._v("中，$attrs 包含所有的 attribute，也包括事件 "),s("a",{attrs:{href:"#emit%E9%80%89%E9%A1%B9"}},[t._v("emit选项")])]),t._v(" "),s("p",[t._v("上面的实例就会生成以下HTML")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<label>\n  <input type="text" id="my-id" class="my-class" />\n</label>\n')])])]),s("h3",{attrs:{id:"children"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#children"}},[t._v("#")]),t._v(" $children")]),t._v(" "),s("p",[t._v("在 vue3 中，"),s("code",[t._v("$children")]),t._v(" property 已移除，不再支持。如果你需要访问子组件实例，我们建议使用 $refs")]),t._v(" "),s("h3",{attrs:{id:"自定义元素"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义元素"}},[t._v("#")]),t._v(" 自定义元素")]),t._v(" "),s("p",[t._v("如果我们想在 Vue 外部定义添加自定义元素 (例如使用 Web 组件 API)，我们需要“指示”Vue 将其视为自定义元素。")]),t._v(" "),s("p",[s("strong",[t._v("vue2")])]),t._v(" "),s("p",[s("code",[t._v("Vue.config.ignoredElements = ['plastic-button']")])]),t._v(" "),s("p",[s("strong",[t._v("vue3")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("webpack配置：通过 "),s("code",[t._v("vue-loader")]),t._v(" 的 "),s("code",[t._v("compilerOptions")]),t._v(" 选项传递")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("rules: [\n  {\n    test: /\\.vue$/,\n    use: 'vue-loader',\n    options: {\n      compilerOptions: {\n        isCustomElement: tag => tag === 'plastic-button'\n      }\n    }\n  }\n  // ...\n]\n")])])])]),t._v(" "),s("li",[s("p",[t._v("动态模版编译：通过 "),s("code",[t._v("app.config.isCustomElement")]),t._v(" 传递")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const app = Vue.createApp({})\napp.config.isCustomElement = tag => tag === 'plastic-button'\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"is动态组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#is动态组件"}},[t._v("#")]),t._v(" is动态组件")]),t._v(" "),s("p",[t._v("在 3.0 中，我们仅将 Vue 对 "),s("code",[t._v("is")]),t._v(" 属性的特殊处理限制到 "),s("code",[t._v("<component>")]),t._v(" tag。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("在保留的 "),s("code",[t._v("<component>")]),t._v(" tag 上使用时，它的行为将与 2.x 中完全相同；")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<component is="bar"></component>\n')])])]),s("ul",[s("li",[t._v("2.x 行为：渲染 "),s("code",[t._v("bar")]),t._v(" 组件。")]),t._v(" "),s("li",[t._v("3.x 行为：渲染 "),s("code",[t._v("bar")]),t._v(" 组件。")])])]),t._v(" "),s("li",[s("p",[t._v("在"),s("strong",[t._v("普通组件")]),t._v("上使用时，它的行为将类似于普通 prop")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<foo is="bar" />\n')])])]),s("ul",[s("li",[t._v("2.x 行为：渲染 "),s("code",[t._v("bar")]),t._v(" 组件。")]),t._v(" "),s("li",[t._v("3.x 行为：通过 "),s("code",[t._v("is")]),t._v(" prop 渲染 "),s("code",[t._v("foo")]),t._v(" 组件。")])])]),t._v(" "),s("li",[s("p",[t._v("在"),s("strong",[t._v("普通元素")]),t._v("上使用时，它将"),s("code",[t._v("is")]),t._v(" 作为原生 attribute 渲染。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<button is="plastic-button">点击我！</button>\n')])])]),s("ul",[s("li",[t._v("2.x 行为：渲染 "),s("code",[t._v("plastic-button")]),t._v(" 组件。")]),t._v(" "),s("li",[t._v("3.x 行为：通过回调渲染原生的 button。")])])]),t._v(" "),s("li",[s("p",[t._v("3.x中实现2.x is 的用法，可以用vue: 前缀")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<table>\n  <tr is="vue:blog-post-row"></tr>\n</table>\n')])])])])]),t._v(" "),s("h3",{attrs:{id:"data选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#data选项"}},[t._v("#")]),t._v(" data选项")]),t._v(" "),s("ol",[s("li",[t._v("在 3.x，"),s("code",[t._v("data")]),t._v(" 选项已标准化为只接受返回 "),s("code",[t._v("object")]),t._v(" 的 "),s("code",[t._v("function")]),t._v("。")]),t._v(" "),s("li",[t._v("当合并来自 mixin 或 extend 的多个 "),s("code",[t._v("data")]),t._v(" 返回值时，现在是浅层次合并的而不是深层次合并的(只合并根级属性)。")])]),t._v(" "),s("h3",{attrs:{id:"emit选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#emit选项"}},[t._v("#")]),t._v(" emit选项")]),t._v(" "),s("p",[t._v("Vue 3 目前提供一个 "),s("code",[t._v("emits")]),t._v(" 选项，和现有的 "),s("code",[t._v("props")]),t._v(" 选项类似。这个选项可以用来定义组件可以向其父组件触发的事件")]),t._v(" "),s("p",[s("strong",[t._v("强烈建议使用 "),s("code",[t._v("emits")]),t._v(" 记录每个组件所触发的所有事件。任何未声明 "),s("code",[t._v("emits")]),t._v(" 的事件监听器都会被算入组件的 "),s("code",[t._v("$attrs")]),t._v(" 并绑定在组件的根节点上。")])]),t._v(" "),s("p",[t._v("以下代码的点击（同一个）事件将会被触发"),s("strong",[t._v("两次")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('// 父组件\n<my-button v-on:click="handleClick"></my-button>\n\n// 子组件\n<template>\n  <button v-on:click="$emit(\'click\', $event)">OK</button>\n</template>\n<script>\nexport default {\n  emits: [] // 不声明事件\n}\n<\/script>\n')])])]),s("h3",{attrs:{id:"移除过滤器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移除过滤器"}},[t._v("#")]),t._v(" 移除过滤器")]),t._v(" "),s("p",[t._v("从 Vue 3.0 开始，过滤器已删除，不再支持，替换方案如下：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("局部过滤器：用方法调用或计算属性替换")])]),t._v(" "),s("li",[s("p",[t._v("全局过滤器：可以通过全局属性在所有组件中使用它")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// 全局属性设置\napp.config.globalProperties.$filters = {\n  currencyUSD(value) {\n    return '$' + value\n  }\n}\n\n// 使用\n<p>{{ $filters.currencyUSD(accountBalance) }}</p>\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"支持多个根节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#支持多个根节点"}},[t._v("#")]),t._v(" 支持多个根节点")]),t._v(" "),s("p",[t._v("vue2.x单文本组件中，在"),s("code",[t._v("template")]),t._v("内只能有一个根节点")]),t._v(" "),s("p",[t._v("vue3.x支持多节点")]),t._v(" "),s("h3",{attrs:{id:"监听组件生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监听组件生命周期"}},[t._v("#")]),t._v(" 监听组件生命周期")]),t._v(" "),s("p",[s("strong",[t._v("vue2")]),t._v("中用的是@hook")]),t._v(" "),s("p",[s("code",[t._v('<child-component @hook:updated="onUpdated">')])]),t._v(" "),s("p",[s("strong",[t._v("vue3")]),t._v("中用的是vue:前缀或者在驼峰命名法的情况下附带前缀 vue")]),t._v(" "),s("p",[s("code",[t._v('<child-component @vue:updated="onUpdated">')])]),t._v(" "),s("p",[s("code",[t._v('<child-component @vueUpdated="onUpdated">')])]),t._v(" "),s("h3",{attrs:{id:"指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令"}},[t._v("#")]),t._v(" 指令")]),t._v(" "),s("h4",{attrs:{id:"v-bind-合并行为"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#v-bind-合并行为"}},[t._v("#")]),t._v(" v-bind 合并行为")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<div id="red" v-bind="{ id: \'blue\' }"></div>\n// vue2: 单独的总会覆盖v-bind的对象\n<div id="red"></div>\n// vue3: 谁后定义谁生效\n<div id="blue"></div>\n')])])]),s("h4",{attrs:{id:"v-if-与-v-for的优先级对比"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#v-if-与-v-for的优先级对比"}},[t._v("#")]),t._v(" v-if 与 v-for的优先级对比")]),t._v(" "),s("p",[t._v("2.x 版本中在一个元素上同时使用 "),s("code",[t._v("v-if")]),t._v(" 和 "),s("code",[t._v("v-for")]),t._v(" 时，"),s("code",[t._v("v-for")]),t._v(" 会优先作用。")]),t._v(" "),s("p",[t._v("3.x 版本中 "),s("code",[t._v("v-if")]),t._v(" 总是优先于 "),s("code",[t._v("v-for")]),t._v(" 生效，也就是说可以在v-for里面写v-if")]),t._v(" "),s("p",[s("strong",[t._v("以后如果有v-if + v-for 的面试题，可以把vue3的改动也加上")])]),t._v(" "),s("h4",{attrs:{id:"v-model"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#v-model"}},[t._v("#")]),t._v(" v-model")]),t._v(" "),s("p",[t._v("在 3.x 中，"),s("strong",[t._v("自定义组件")]),t._v("上的 "),s("code",[t._v("v-model")]),t._v(" 相当于传递了 "),s("code",[t._v("modelValue")]),t._v(" prop 并接收抛出的 "),s("code",[t._v("update:modelValue")]),t._v(" 事件")]),t._v(" "),s("ul",[s("li",[t._v("修改model名称，可以通过"),s("code",[t._v('v-model:title="pageTitle"')]),t._v("，与vue2中的"),s("code",[t._v('v-bind:title.sync="pageTitle"')])]),t._v(" "),s("li",[t._v("一个组件可以使用多个v-model")])]),t._v(" "),s("h4",{attrs:{id:"自定义指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义指令"}},[t._v("#")]),t._v(" 自定义指令")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("指令的钩子函数已经被重命名，以更好地与组件的生命周期保持一致。")]),t._v(" "),s("ul",[s("li",[t._v("created - 新的！在元素的 attribute 或事件侦听器应用之前调用。")]),t._v(" "),s("li",[t._v("bind → "),s("strong",[t._v("beforeMount")])]),t._v(" "),s("li",[t._v("inserted → "),s("strong",[t._v("mounted")])]),t._v(" "),s("li",[s("strong",[t._v("beforeUpdate")]),t._v("：新的！这是在元素本身更新之前调用的，很像组件生命周期钩子。")]),t._v(" "),s("li",[t._v("update → 移除！与"),s("code",[t._v("updated")]),t._v("钩子太多的相似之处要更新，所以这是多余的，请改用 "),s("code",[t._v("updated")]),t._v("。")]),t._v(" "),s("li",[t._v("componentUpdated → "),s("strong",[t._v("updated")])]),t._v(" "),s("li",[s("strong",[t._v("beforeUnmount")]),t._v("：新的！与组件生命周期钩子类似，它将在卸载元素之前调用。")]),t._v(" "),s("li",[t._v("unbind -> "),s("strong",[t._v("unmounted")])])])]),t._v(" "),s("li",[s("p",[t._v("访问组件实例")]),t._v(" "),s("p",[t._v("在vue2中通过vnode访问")]),t._v(" "),s("p",[t._v("在vue3中通过"),s("code",[t._v("binding.instance")])])])]),t._v(" "),s("h4",{attrs:{id:"移除了-v-on-的-native-修饰符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移除了-v-on-的-native-修饰符"}},[t._v("#")]),t._v(" 移除了 v-on 的 native 修饰符")]),t._v(" "),s("h3",{attrs:{id:"按键修饰符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#按键修饰符"}},[t._v("#")]),t._v(" 按键修饰符")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("不再支持使用数字 (即键码) 作为 "),s("code",[t._v("v-on")]),t._v(" 修饰符")]),t._v(" "),s("p",[s("code",[t._v('<input v-on:keyup.13="submit" />')])])]),t._v(" "),s("li",[s("p",[t._v("不再支持 "),s("code",[t._v("config.keyCodes")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('Vue.config.keyCodes = {\n  f1: 112\n}\n\x3c!-- 键码版本 --\x3e\n<input v-on:keyup.112="showHelpText" />\n\x3c!-- 自定义别名版本 --\x3e\n<input v-on:keyup.f1="showHelpText" />\n')])])])])]),t._v(" "),s("h3",{attrs:{id:"移除-listener"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移除-listener"}},[t._v("#")]),t._v(" 移除$listener")]),t._v(" "),s("p",[t._v("现在事件监听器是 "),s("code",[t._v("$attrs")]),t._v(" 的一部分")]),t._v(" "),s("h3",{attrs:{id:"移除内联模版"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移除内联模版"}},[t._v("#")]),t._v(" 移除内联模版")]),t._v(" "),s("p",[t._v("vue2内联模版")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// 定义子组件\nvar ChildComponent = Vue.component({\n\ttemplate: '<div></div>' \n})\n// 父组件中使用：\nvar FatherComponent = Vue.component({\n\ttemplate: `<div>\n                  <child-component   inline-template>\n                    <p>这是inline-template</p>\n                 </child-component>\n              </div>`\n})\n\n// 最终结果: p标签的内容不需要子组件中放置插槽就可以渲染出来。\n<div>\n    <p>这是inline-template</p>\n</div>\n")])])]),s("h3",{attrs:{id:"propsdata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#propsdata"}},[t._v("#")]),t._v(" propsData")]),t._v(" "),s("p",[s("code",[t._v("propsData")]),t._v(" 选项之前用于在创建 Vue 实例的过程中传入 prop，现在它被移除了。如果想为 Vue 3 应用的根组件传入 prop，请使用 "),s("a",{attrs:{href:"#createApp"}},[t._v("createApp")]),t._v(" 的第二个参数。")]),t._v(" "),s("h3",{attrs:{id:"插槽统一"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插槽统一"}},[t._v("#")]),t._v(" 插槽统一")]),t._v(" "),s("p",[t._v("定义插槽名称")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.x 语法")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LayoutComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("slot")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'header'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("header"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("slot")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.x Syntax")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LayoutComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("header")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("header"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("当你需要以编程方式引用作用域插槽时，它们现在被统一到 "),s("code",[t._v("$slots")]),t._v(" 选项中了。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// 2.x 语法\nthis.$scopedSlots.header\n\n// 3.x 语法\nthis.$slots.header()\n")])])]),s("h3",{attrs:{id:"过渡的class名更改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#过渡的class名更改"}},[t._v("#")]),t._v(" 过渡的class名更改")]),t._v(" "),s("p",[t._v("过渡类名 "),s("code",[t._v("v-enter")]),t._v(" 修改为 "),s("code",[t._v("v-enter-from")]),t._v("、过渡类名 "),s("code",[t._v("v-leave")]),t._v(" 修改为 "),s("code",[t._v("v-leave-from")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"api改动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api改动"}},[t._v("#")]),t._v(" API改动")]),t._v(" "),s("h4",{attrs:{id:"全局api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局api"}},[t._v("#")]),t._v(" 全局API")]),t._v(" "),s("h5",{attrs:{id:"createapp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#createapp"}},[t._v("#")]),t._v(" createApp")]),t._v(" "),s("p",[t._v("vue3引入了"),s("code",[t._v("createApp")]),t._v("，Vue上的所有全局API在创建的app实例上同样存在")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import { createApp } from 'vue'\nconst app = createApp({})\n")])])]),s("h6",{attrs:{id:"config-productiontip移除"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#config-productiontip移除"}},[t._v("#")]),t._v(" "),s("code",[t._v("config.productionTip")]),t._v("移除")]),t._v(" "),s("h6",{attrs:{id:"config-ignoredelements-替换为-app-config-iscustomelement"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#config-ignoredelements-替换为-app-config-iscustomelement"}},[t._v("#")]),t._v(" "),s("code",[t._v("config.ignoredElements")]),t._v(" 替换为 "),s("code",[t._v("app.config.isCustomElement")])]),t._v(" "),s("p",[t._v("​\t"),s("a",{attrs:{href:"#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%83%E7%B4%A0"}},[t._v("自定义元素")])]),t._v(" "),s("h6",{attrs:{id:"vue-prototype-替换为-app-config-globalproperties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-prototype-替换为-app-config-globalproperties"}},[t._v("#")]),t._v(" "),s("code",[t._v("Vue.prototype")]),t._v(" 替换为 "),s("code",[t._v("app.config.globalProperties")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Vue.prototype.$http\n// 使用\nthis.$http\n")])])]),s("h6",{attrs:{id:"移除vue-extend"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移除vue-extend"}},[t._v("#")]),t._v(" 移除"),s("code",[t._v("Vue.extend")])]),t._v(" "),s("blockquote",[s("p",[t._v("在 Vue 3 中，我们强烈建议使用 "),s("a",{attrs:{href:"https://v3.cn.vuejs.org/api/composition-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("组合式 API"),s("OutboundLink")],1),t._v(" 来替代继承与 mixin。如果因为某种原因仍然需要使用组件继承，你可以使用 "),s("a",{attrs:{href:"https://v3.cn.vuejs.org/api/options-composition.html#extends",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("extends")]),t._v(" 选项"),s("OutboundLink")],1),t._v(" 来代替 "),s("code",[t._v("Vue.extend")]),t._v("。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// vue2\n// 用Vue.extend\nconst Profile = Vue.extend({\n  template: '<p>{{firstName}} {{lastName}} aka {{alias}}</p>',\n  data() {\n    return {\n      firstName: 'Walter',\n      lastName: 'White',\n      alias: 'Heisenberg'\n    }\n  }\n})\nnew Profile().$mount('#mount-point')\n\n// vue 3\nconst Profile = {\n  template: '<p>{{firstName}} {{lastName}} aka {{alias}}</p>',\n  data() {\n    return {\n      firstName: 'Walter',\n      lastName: 'White',\n      alias: 'Heisenberg'\n    }\n  }\n}\n// 用createApp\nVue.createApp(Profile).mount('#mount-point')\n")])])]),s("h6",{attrs:{id:"引入插件方法修改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#引入插件方法修改"}},[t._v("#")]),t._v(" 引入插件方法修改")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const app = createApp(MyApp)\napp.use(VueRouter)\n")])])]),s("h5",{attrs:{id:"挂载app实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#挂载app实例"}},[t._v("#")]),t._v(" 挂载APP实例")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import { createApp } from 'vue'\nimport MyApp from './MyApp.vue'\n// vue2\nnew Vue({\n\trender: (h) => h(App),\n}).$mount(\"#app\");\n\n// vue3\nconst app = createApp(MyApp)\napp.mount('#app')\n")])])]),s("h5",{attrs:{id:"provide-inject"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#provide-inject"}},[t._v("#")]),t._v(" Provide / Inject")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// 在入口\napp.provide('guide', 'Vue 3 Guide')\n\n// 在子组件\nexport default {\n  inject: {\n    book: {\n      from: 'guide'\n    }\n  },\n  template: `<div>{{ book }}</div>`\n}\n")])])]),s("h5",{attrs:{id:"在应用之间共享配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在应用之间共享配置"}},[t._v("#")]),t._v(" 在应用之间共享配置")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import { createApp } from 'vue'\nimport Foo from './Foo.vue'\nimport Bar from './Bar.vue'\n// 创建工厂函数\nconst createMyApp = options => {\n  const app = createApp(options)\n  app.directive('focus' /* ... */)\n  return app\n}\n// Foo 和 Bar 实例及其后代中都可以使用 focus 指令。\ncreateMyApp(Foo).mount('#foo')\ncreateMyApp(Bar).mount('#bar')\n")])])]),s("h5",{attrs:{id:"treeshaking"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#treeshaking"}},[t._v("#")]),t._v(" Treeshaking")]),t._v(" "),s("p",[t._v("vue2中，全局 API 如 "),s("code",[t._v("Vue.nextTick()")]),t._v(" 是不支持 tree-shake 的，不管它们实际是否被使用，都会被包含在最终的打包产物中。")]),t._v(" "),s("ul",[s("li",[t._v("Vue.nextTick")]),t._v(" "),s("li",[t._v("Vue.observable")]),t._v(" "),s("li",[t._v("Vue.version")]),t._v(" "),s("li",[t._v("Vue.compile")]),t._v(" "),s("li",[t._v("Vue.set")]),t._v(" "),s("li",[t._v("Vue.delete")])]),t._v(" "),s("p",[s("code",[t._v("import { nextTick } from 'vue'")])]),t._v(" "),s("p",[t._v("在 Vue 3 中，全局和内部 API 都经过了重构，并考虑到了 tree-shaking 的支持。因此，全局 API 现在只能作为 ES 模块构建的命名导出进行访问（使用时要引入，否则会"),s("strong",[t._v("报错")]),t._v("）。")]),t._v(" "),s("h4",{attrs:{id:"挂载api变化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#挂载api变化"}},[t._v("#")]),t._v(" 挂载API变化")]),t._v(" "),s("p",[t._v("在 Vue 2.x 中，当挂载一个具有 "),s("code",[t._v("template")]),t._v(" 的应用时，被渲染的内容会"),s("strong",[t._v("替换")]),t._v("我们要挂载的目标元素。")]),t._v(" "),s("p",[t._v("在 Vue 3.x 中，被渲染的应用会作为"),s("strong",[t._v("子元素")]),t._v("插入。")]),t._v(" "),s("h4",{attrs:{id:"事件api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件api"}},[t._v("#")]),t._v(" 事件API")]),t._v(" "),s("p",[s("code",[t._v("$on")]),t._v("，"),s("code",[t._v("$off")]),t._v(" 和 "),s("code",[t._v("$once")]),t._v(" 实例方法已被移除，组件实例不再实现事件触发接口")]),t._v(" "),s("p",[s("strong",[t._v("就是EventBus 不存在了，不能用这种方法进行传值了")])]),t._v(" "),s("p",[t._v("Event bus 模式可以被替换为实现了事件触发器接口的外部库，例如 "),s("a",{attrs:{href:"https://github.com/developit/mitt",target:"_blank",rel:"noopener noreferrer"}},[t._v("mitt"),s("OutboundLink")],1),t._v(" 或 "),s("a",{attrs:{href:"https://github.com/scottcorgan/tiny-emitter",target:"_blank",rel:"noopener noreferrer"}},[t._v("tiny-emitter"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h4",{attrs:{id:"渲染函数api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#渲染函数api"}},[t._v("#")]),t._v(" 渲染函数API")]),t._v(" "),s("h5",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),s("p",[t._v("在vue2中，"),s("code",[t._v("render")]),t._v(" 函数会自动接收 "),s("code",[t._v("h")]),t._v(" 函数 (它是 "),s("code",[t._v("createElement")]),t._v(" 的惯用别名) 作为参数")]),t._v(" "),s("p",[t._v("在 vue3 中，"),s("code",[t._v("h")]),t._v(" 函数现在是全局导入的，而不是作为参数自动传递。")]),t._v(" "),s("p",[t._v("​\t"),s("code",[t._v("import { h } from 'vue'")])]),t._v(" "),s("h5",{attrs:{id:"注册组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注册组件"}},[t._v("#")]),t._v(" 注册组件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Vue.component('button-counter', {\n  data() {\n    return {\n      count: 0\n    }\n  }\n  template: `\n    <button @click=\"count++\">\n      Clicked {{ count }} times.\n    </button>\n  `\n})\n")])])]),s("p",[t._v("在 vue2 中，注册一个组件后，把组件名作为字符串传给渲染函数的第一个参数，渲染函数可以正常的工作")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("export default {\n  render(h) {\n    return h('button-counter')\n  }\n}\n")])])]),s("p",[t._v("在 vue3中，不能再用字符串 ID 隐式查找已注册组件，需要使用一个导入的 "),s("code",[t._v("resolveComponent")]),t._v(" 方法")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import { h, resolveComponent } from 'vue'\n\nexport default {\n  setup() {\n    const ButtonCounter = resolveComponent('button-counter')\n    return () => h(ButtonCounter)\n  }\n}\n")])])]),s("h2",{attrs:{id:"vue3快速上手"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue3快速上手"}},[t._v("#")]),t._v(" Vue3快速上手")]),t._v(" "),s("img",{staticStyle:{width:"200px"},attrs:{src:"https://user-images.githubusercontent.com/499550/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png"}}),t._v(" "),s("h3",{attrs:{id:"_1-vue3简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-vue3简介"}},[t._v("#")]),t._v(" 1.Vue3简介")]),t._v(" "),s("ul",[s("li",[t._v("2020年9月18日，Vue.js发布3.0版本，代号：One Piece（海贼王）")]),t._v(" "),s("li",[t._v("耗时2年多、"),s("a",{attrs:{href:"https://github.com/vuejs/vue-next/graphs/commit-activity",target:"_blank",rel:"noopener noreferrer"}},[t._v("2600+次提交"),s("OutboundLink")],1),t._v("、"),s("a",{attrs:{href:"https://github.com/vuejs/rfcs/tree/master/active-rfcs",target:"_blank",rel:"noopener noreferrer"}},[t._v("30+个RFC"),s("OutboundLink")],1),t._v("、"),s("a",{attrs:{href:"https://github.com/vuejs/vue-next/pulls?q=is%3Apr+is%3Amerged+-author%3Aapp%2Fdependabot-preview+",target:"_blank",rel:"noopener noreferrer"}},[t._v("600+次PR"),s("OutboundLink")],1),t._v("、"),s("a",{attrs:{href:"https://github.com/vuejs/vue-next/graphs/contributors",target:"_blank",rel:"noopener noreferrer"}},[t._v("99位贡献者"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("github上的tags地址：https://github.com/vuejs/vue-next/releases/tag/v3.0.0")])]),t._v(" "),s("h3",{attrs:{id:"_2-vue3带来了什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-vue3带来了什么"}},[t._v("#")]),t._v(" 2.Vue3带来了什么")]),t._v(" "),s("h4",{attrs:{id:"_1-性能的提升"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-性能的提升"}},[t._v("#")]),t._v(" 1.性能的提升")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("打包大小减少41%")])]),t._v(" "),s("li",[s("p",[t._v("初次渲染快55%, 更新渲染快133%")])]),t._v(" "),s("li",[s("p",[t._v("内存减少54%")]),t._v(" "),s("p",[t._v("......")])])]),t._v(" "),s("h4",{attrs:{id:"_2-源码的升级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-源码的升级"}},[t._v("#")]),t._v(" 2.源码的升级")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("使用Proxy代替defineProperty实现响应式")])]),t._v(" "),s("li",[s("p",[t._v("重写虚拟DOM的实现和Tree-Shaking")]),t._v(" "),s("p",[t._v("......")])])]),t._v(" "),s("h4",{attrs:{id:"_3-拥抱typescript"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-拥抱typescript"}},[t._v("#")]),t._v(" 3.拥抱TypeScript")]),t._v(" "),s("ul",[s("li",[t._v("Vue3可以更好的支持TypeScript")])]),t._v(" "),s("h4",{attrs:{id:"_4-新的特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-新的特性"}},[t._v("#")]),t._v(" 4.新的特性")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("Composition API（组合API）")]),t._v(" "),s("ul",[s("li",[t._v("setup配置")]),t._v(" "),s("li",[t._v("ref与reactive")]),t._v(" "),s("li",[t._v("watch与watchEffect")]),t._v(" "),s("li",[t._v("provide与inject")]),t._v(" "),s("li",[t._v("......")])])]),t._v(" "),s("li",[s("p",[t._v("新的内置组件")]),t._v(" "),s("ul",[s("li",[t._v("Fragment")]),t._v(" "),s("li",[t._v("Teleport")]),t._v(" "),s("li",[t._v("Suspense")])])]),t._v(" "),s("li",[s("p",[t._v("其他改变")]),t._v(" "),s("ul",[s("li",[t._v("新的生命周期钩子")]),t._v(" "),s("li",[t._v("data 选项应始终被声明为一个函数")]),t._v(" "),s("li",[t._v("移除keyCode支持作为 v-on 的修饰符")]),t._v(" "),s("li",[t._v("......")])])])]),t._v(" "),s("h2",{attrs:{id:"一、创建vue3-0工程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、创建vue3-0工程"}},[t._v("#")]),t._v(" 一、创建Vue3.0工程")]),t._v(" "),s("h3",{attrs:{id:"_1-使用-vue-cli-创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用-vue-cli-创建"}},[t._v("#")]),t._v(" 1.使用 vue-cli 创建")]),t._v(" "),s("p",[t._v("官方文档：https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上")]),t._v("\nvue --version\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 安装或者升级你的@vue/cli")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g @vue/cli\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 创建")]),t._v("\nvue create vue_test\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 启动")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" vue_test\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run serve\n")])])]),s("h3",{attrs:{id:"_2-使用-vite-创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用-vite-创建"}},[t._v("#")]),t._v(" 2.使用 vite 创建")]),t._v(" "),s("p",[t._v("官方文档：https://v3.cn.vuejs.org/guide/installation.html#vite")]),t._v(" "),s("p",[t._v("vite官网：https://vitejs.cn")]),t._v(" "),s("ul",[s("li",[t._v("什么是vite？—— 新一代前端构建工具。")]),t._v(" "),s("li",[t._v("优势如下：\n"),s("ul",[s("li",[t._v("开发环境中，无需打包操作，可快速的冷启动。")]),t._v(" "),s("li",[t._v("轻量快速的热重载（HMR）。")]),t._v(" "),s("li",[t._v("真正的按需编译，不再等待整个应用编译完成。")])])]),t._v(" "),s("li",[t._v("传统构建 与 vite构建对比图")])]),t._v(" "),s("p",[s("img",{staticStyle:{width:"500px",height:"280px",float:"left"},attrs:{src:"https://cn.vitejs.dev/assets/bundler.37740380.png"}}),s("img",{staticStyle:{width:"480px",height:"280px"},attrs:{src:"https://cn.vitejs.dev/assets/esm.3070012d.png"}})]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 创建工程")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init vite-app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 进入工程目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 安装依赖")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 运行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev\n")])])]),s("h2",{attrs:{id:"二、常用-composition-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、常用-composition-api"}},[t._v("#")]),t._v(" 二、常用 Composition API")]),t._v(" "),s("p",[t._v("官方文档: https://v3.cn.vuejs.org/guide/composition-api-introduction.html")]),t._v(" "),s("h3",{attrs:{id:"_1-拉开序幕的setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-拉开序幕的setup"}},[t._v("#")]),t._v(" 1.拉开序幕的setup")]),t._v(" "),s("ol",[s("li",[t._v("理解：Vue3.0中一个新的配置项，值为一个函数。")]),t._v(" "),s("li",[t._v("setup是所有"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("Composition API（组合API）")]),s("i",{staticStyle:{color:"gray","font-weight":"bold"}},[t._v("“ 表演的舞台 ”")]),t._v("。")]),t._v(" "),s("li",[t._v("组件中所用到的：数据、方法等等，均要配置在setup中。")]),t._v(" "),s("li",[t._v("setup函数的两种返回值：\n"),s("ol",[s("li",[t._v("若返回一个对象，则对象中的属性、方法, 在模板中均可以直接使用。（重点关注！）")]),t._v(" "),s("li",[s("span",{staticStyle:{color:"#aad"}},[t._v("若返回一个渲染函数：则可以自定义渲染内容。（了解）")])])])]),t._v(" "),s("li",[t._v("注意点：\n"),s("ol",[s("li",[t._v("尽量不要与Vue2.x配置混用\n"),s("ul",[s("li",[t._v("Vue2.x配置（data、methos、computed...）中"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("可以访问到")]),t._v("setup中的属性、方法。")]),t._v(" "),s("li",[t._v("但在setup中"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("不能访问到")]),t._v("Vue2.x配置（data、methos、computed...）。")]),t._v(" "),s("li",[t._v("如果有重名, setup优先。")])])]),t._v(" "),s("li",[t._v("setup不能是一个async函数，因为返回值不再是return的对象, 而是promise, 模板看不到return对象中的属性。（后期也可以返回一个Promise实例，但需要Suspense和异步组件的配合）")])])])]),t._v(" "),s("h3",{attrs:{id:"_2-ref函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ref函数"}},[t._v("#")]),t._v(" 2.ref函数")]),t._v(" "),s("ul",[s("li",[t._v("作用: 定义一个响应式的数据")]),t._v(" "),s("li",[t._v("语法: "),s("code",[t._v("const xxx = ref(initValue)")]),t._v(" "),s("ul",[s("li",[t._v("创建一个包含响应式数据的"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("引用对象（reference对象，简称ref对象）")]),t._v("。")]),t._v(" "),s("li",[t._v("JS中操作数据： "),s("code",[t._v("xxx.value")])]),t._v(" "),s("li",[t._v("模板中读取数据: 不需要.value，直接："),s("code",[t._v("<div>"+t._s(t.xxx)+"</div>")])])])]),t._v(" "),s("li",[t._v("备注：\n"),s("ul",[s("li",[t._v("接收的数据可以是：基本类型、也可以是对象类型。")]),t._v(" "),s("li",[t._v("基本类型的数据：响应式依然是靠"),s("code",[t._v("Object.defineProperty()")]),t._v("的"),s("code",[t._v("get")]),t._v("与"),s("code",[t._v("set")]),t._v("完成的。")]),t._v(" "),s("li",[t._v("对象类型的数据：内部 "),s("i",{staticStyle:{color:"gray","font-weight":"bold"}},[t._v("“ 求助 ”")]),t._v(" 了Vue3.0中的一个新函数—— "),s("code",[t._v("reactive")]),t._v("函数。")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-reactive函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-reactive函数"}},[t._v("#")]),t._v(" 3.reactive函数")]),t._v(" "),s("ul",[s("li",[t._v("作用: 定义一个"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("对象类型")]),t._v("的响应式数据（基本类型不要用它，要用"),s("code",[t._v("ref")]),t._v("函数）")]),t._v(" "),s("li",[t._v("语法："),s("code",[t._v("const 代理对象= reactive(源对象)")]),t._v("接收一个对象（或数组），返回一个"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("代理对象（Proxy的实例对象，简称proxy对象）")])]),t._v(" "),s("li",[t._v("reactive定义的响应式数据是“深层次的”。")]),t._v(" "),s("li",[t._v("内部基于 ES6 的 Proxy 实现，通过代理对象操作源对象内部数据进行操作。")])]),t._v(" "),s("h3",{attrs:{id:"_4-vue3-0中的响应式原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-vue3-0中的响应式原理"}},[t._v("#")]),t._v(" 4.Vue3.0中的响应式原理")]),t._v(" "),s("h4",{attrs:{id:"vue2-x的响应式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue2-x的响应式"}},[t._v("#")]),t._v(" vue2.x的响应式")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("实现原理：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("对象类型：通过"),s("code",[t._v("Object.defineProperty()")]),t._v("对属性的读取、修改进行拦截（数据劫持）。")])]),t._v(" "),s("li",[s("p",[t._v("数组类型：通过重写更新数组的一系列方法来实现拦截。（对数组的变更方法进行了包裹）。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'count'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])])]),t._v(" "),s("li",[s("p",[t._v("存在问题：")]),t._v(" "),s("ul",[s("li",[t._v("新增属性、删除属性, 界面不会更新。")]),t._v(" "),s("li",[t._v("直接通过下标修改数组, 界面不会自动更新。")])])])]),t._v(" "),s("h4",{attrs:{id:"vue3-0的响应式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue3-0的响应式"}},[t._v("#")]),t._v(" Vue3.0的响应式")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("实现原理:")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("通过Proxy（代理）:  拦截对象中任意属性的变化, 包括：属性值的读写、属性的添加、属性的删除等。")])]),t._v(" "),s("li",[s("p",[t._v("通过Reflect（反射）:  对源对象的属性进行操作。")])]),t._v(" "),s("li",[s("p",[t._v("MDN文档中描述的Proxy与Reflect：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Proxy：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy")])]),t._v(" "),s("li",[s("p",[t._v("Reflect：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Proxy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拦截读取属性值")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Reflect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拦截设置属性值或添加新属性")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Reflect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拦截删除属性")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteProperty")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Reflect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nproxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tom'")]),t._v("   \n")])])])])])])])])]),t._v(" "),s("h3",{attrs:{id:"_5-reactive对比ref"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-reactive对比ref"}},[t._v("#")]),t._v(" 5.reactive对比ref")]),t._v(" "),s("ul",[s("li",[t._v("从定义数据角度对比：\n"),s("ul",[s("li",[t._v("ref用来定义："),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("基本类型数据")]),t._v("。")]),t._v(" "),s("li",[t._v("reactive用来定义："),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("对象（或数组）类型数据")]),t._v("。")]),t._v(" "),s("li",[t._v("备注：ref也可以用来定义"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("对象（或数组）类型数据")]),t._v(", 它内部会自动通过"),s("code",[t._v("reactive")]),t._v("转为"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("代理对象")]),t._v("。")])])]),t._v(" "),s("li",[t._v("从原理角度对比：\n"),s("ul",[s("li",[t._v("ref通过"),s("code",[t._v("Object.defineProperty()")]),t._v("的"),s("code",[t._v("get")]),t._v("与"),s("code",[t._v("set")]),t._v("来实现响应式（数据劫持）。")]),t._v(" "),s("li",[t._v("reactive通过使用"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("Proxy")]),t._v("来实现响应式（数据劫持）, 并通过"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("Reflect")]),t._v("操作"),s("strong",{staticStyle:{color:"orange"}},[t._v("源对象")]),t._v("内部的数据。")])])]),t._v(" "),s("li",[t._v("从使用角度对比：\n"),s("ul",[s("li",[t._v("ref定义的数据：操作数据"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("需要")]),s("code",[t._v(".value")]),t._v("，读取数据时模板中直接读取"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("不需要")]),s("code",[t._v(".value")]),t._v("。")]),t._v(" "),s("li",[t._v("reactive定义的数据：操作数据与读取数据："),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("均不需要")]),s("code",[t._v(".value")]),t._v("。")])])])]),t._v(" "),s("h3",{attrs:{id:"_6-setup的两个注意点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-setup的两个注意点"}},[t._v("#")]),t._v(" 6.setup的两个注意点")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("setup执行的时机")]),t._v(" "),s("ul",[s("li",[t._v("在beforeCreate之前执行一次，this是undefined。")])])]),t._v(" "),s("li",[s("p",[t._v("setup的参数")]),t._v(" "),s("ul",[s("li",[t._v("props：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性。")]),t._v(" "),s("li",[t._v("context：上下文对象\n"),s("ul",[s("li",[t._v("attrs: 值为对象，包含：组件外部传递过来，但没有在props配置中声明的属性, 相当于 "),s("code",[t._v("this.$attrs")]),t._v("。")]),t._v(" "),s("li",[t._v("slots: 收到的插槽内容, 相当于 "),s("code",[t._v("this.$slots")]),t._v("。")]),t._v(" "),s("li",[t._v("emit: 分发自定义事件的函数, 相当于 "),s("code",[t._v("this.$emit")]),t._v("。")])])])])])]),t._v(" "),s("h3",{attrs:{id:"_7-计算属性与监视"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-计算属性与监视"}},[t._v("#")]),t._v(" 7.计算属性与监视")]),t._v(" "),s("h4",{attrs:{id:"_1-computed函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-computed函数"}},[t._v("#")]),t._v(" 1.computed函数")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("与Vue2.x中computed配置功能一致")])]),t._v(" "),s("li",[s("p",[t._v("写法")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("computed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//计算属性——简写")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" fullName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastName\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//计算属性——完整")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" fullName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastName\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nameArr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nameArr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nameArr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),s("h4",{attrs:{id:"_2-watch函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-watch函数"}},[t._v("#")]),t._v(" 2.watch函数")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("与Vue2.x中watch配置功能一致")])]),t._v(" "),s("li",[s("p",[t._v("两个小“坑”：")]),t._v(" "),s("ul",[s("li",[t._v("监视reactive定义的响应式数据时：oldValue无法正确获取、强制开启了深度监视（deep配置失效）。")]),t._v(" "),s("li",[t._v("监视reactive定义的响应式数据中某个属性时：deep配置有效。")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//情况一：监视ref定义的响应式数据")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sum变化了'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("immediate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//情况二：监视多个ref定义的响应式数据")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("sum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sum或msg变化了'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 情况三：监视reactive定义的响应式数据\n\t\t\t若watch监视的是reactive定义的响应式数据，则无法正确获得oldValue！！\n\t\t\t若watch监视的是reactive定义的响应式数据，则强制开启了深度监视 \n*/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'person变化了'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("immediate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("deep")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//此处的deep配置不再奏效")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//情况四：监视reactive定义的响应式数据中的某个属性")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("job"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'person的job变化了'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("immediate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("deep")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//情况五：监视reactive定义的响应式数据中的某些属性")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("job"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'person的job变化了'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("immediate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("deep")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//特殊情况")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("job"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'person的job变化了'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("deep")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//此处由于监视的是reactive素定义的对象中的某个属性，所以deep配置有效")]),t._v("\n")])])])])]),t._v(" "),s("h4",{attrs:{id:"_3-watcheffect函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-watcheffect函数"}},[t._v("#")]),t._v(" 3.watchEffect函数")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("watch的套路是：既要指明监视的属性，也要指明监视的回调。")])]),t._v(" "),s("li",[s("p",[t._v("watchEffect的套路是：不用指明监视哪个属性，监视的回调中用到哪个属性，那就监视哪个属性。")])]),t._v(" "),s("li",[s("p",[t._v("watchEffect有点像computed：")]),t._v(" "),s("ul",[s("li",[t._v("但computed注重的计算出来的值（回调函数的返回值），所以必须要写返回值。")]),t._v(" "),s("li",[t._v("而watchEffect更注重的是过程（回调函数的函数体），所以不用写返回值。")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//watchEffect所指定的回调中用到的数据只要发生变化，则直接重新执行回调。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watchEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" x1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" x2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'watchEffect配置的回调执行了'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"_8-生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-生命周期"}},[t._v("#")]),t._v(" 8.生命周期")]),t._v(" "),s("p",[s("img",{attrs:{src:"/notes/img//vue3lifecycle.png",alt:"vue3生命周期"}})]),t._v(" "),s("ul",[s("li",[t._v("Vue3.0中可以继续使用Vue2.x中的生命周期钩子，但有有两个被更名：\n"),s("ul",[s("li",[s("code",[t._v("beforeDestroy")]),t._v("改名为 "),s("code",[t._v("beforeUnmount")])]),t._v(" "),s("li",[s("code",[t._v("destroyed")]),t._v("改名为 "),s("code",[t._v("unmounted")])])])]),t._v(" "),s("li",[t._v("Vue3.0也提供了 Composition API 形式的生命周期钩子，与Vue2.x中钩子对应关系如下：\n"),s("ul",[s("li",[s("code",[t._v("beforeCreate")]),t._v("===>"),s("code",[t._v("setup()")])]),t._v(" "),s("li",[s("code",[t._v("created")]),t._v("=======>"),s("code",[t._v("setup()")])]),t._v(" "),s("li",[s("code",[t._v("beforeMount")]),t._v(" ===>"),s("code",[t._v("onBeforeMount")])]),t._v(" "),s("li",[s("code",[t._v("mounted")]),t._v("=======>"),s("code",[t._v("onMounted")])]),t._v(" "),s("li",[s("code",[t._v("beforeUpdate")]),t._v("===>"),s("code",[t._v("onBeforeUpdate")])]),t._v(" "),s("li",[s("code",[t._v("updated")]),t._v(" =======>"),s("code",[t._v("onUpdated")])]),t._v(" "),s("li",[s("code",[t._v("beforeUnmount")]),t._v(" ==>"),s("code",[t._v("onBeforeUnmount")])]),t._v(" "),s("li",[s("code",[t._v("unmounted")]),t._v(" =====>"),s("code",[t._v("onUnmounted")])])])])]),t._v(" "),s("h3",{attrs:{id:"_9-自定义hook函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-自定义hook函数"}},[t._v("#")]),t._v(" 9.自定义hook函数")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("什么是hook？—— 本质是一个函数，把setup函数中使用的Composition API进行了封装。")])]),t._v(" "),s("li",[s("p",[t._v("类似于vue2.x中的mixin。")])]),t._v(" "),s("li",[s("p",[t._v("自定义hook的优势: 复用代码, 让setup中的逻辑更清楚易懂。")])])]),t._v(" "),s("h3",{attrs:{id:"_10-toref"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-toref"}},[t._v("#")]),t._v(" 10.toRef")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("作用：创建一个 ref 对象，其value值指向另一个对象中的某个属性。")])]),t._v(" "),s("li",[s("p",[t._v("语法："),s("code",[t._v("const name = toRef(person,'name')")])])]),t._v(" "),s("li",[s("p",[t._v("应用:   要将响应式对象中的某个属性单独提供给外部使用时。")])]),t._v(" "),s("li",[s("p",[t._v("扩展："),s("code",[t._v("toRefs")]),t._v(" 与"),s("code",[t._v("toRef")]),t._v("功能一致，但可以批量创建多个 ref 对象，语法："),s("code",[t._v("toRefs(person)")])])])]),t._v(" "),s("h2",{attrs:{id:"三、其它-composition-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、其它-composition-api"}},[t._v("#")]),t._v(" 三、其它 Composition API")]),t._v(" "),s("h3",{attrs:{id:"_1-shallowreactive-与-shallowref"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-shallowreactive-与-shallowref"}},[t._v("#")]),t._v(" 1.shallowReactive 与 shallowRef")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("shallowReactive：只处理对象最外层属性的响应式（浅响应式）。")])]),t._v(" "),s("li",[s("p",[t._v("shallowRef：只处理基本数据类型的响应式, 不进行对象的响应式处理。")])]),t._v(" "),s("li",[s("p",[t._v("什么时候使用?")]),t._v(" "),s("ul",[s("li",[t._v("如果有一个对象数据，结构比较深, 但变化时只是外层属性变化 ===> shallowReactive。")]),t._v(" "),s("li",[t._v("如果有一个对象数据，后续功能不会修改该对象中的属性，而是生新的对象来替换 ===> shallowRef。")])])])]),t._v(" "),s("h3",{attrs:{id:"_2-readonly-与-shallowreadonly"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-readonly-与-shallowreadonly"}},[t._v("#")]),t._v(" 2.readonly 与 shallowReadonly")]),t._v(" "),s("ul",[s("li",[t._v("readonly: 让一个响应式数据变为只读的（深只读）。")]),t._v(" "),s("li",[t._v("shallowReadonly：让一个响应式数据变为只读的（浅只读）。")]),t._v(" "),s("li",[t._v("应用场景: 不希望数据被修改时。")])]),t._v(" "),s("h3",{attrs:{id:"_3-toraw-与-markraw"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-toraw-与-markraw"}},[t._v("#")]),t._v(" 3.toRaw 与 markRaw")]),t._v(" "),s("ul",[s("li",[t._v("toRaw：\n"),s("ul",[s("li",[t._v("作用：将一个由"),s("code",[t._v("reactive")]),t._v("生成的"),s("strong",{staticStyle:{color:"orange"}},[t._v("响应式对象")]),t._v("转为"),s("strong",{staticStyle:{color:"orange"}},[t._v("普通对象")]),t._v("。")]),t._v(" "),s("li",[t._v("使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新。")])])]),t._v(" "),s("li",[t._v("markRaw：\n"),s("ul",[s("li",[t._v("作用：标记一个对象，使其永远不会再成为响应式对象。")]),t._v(" "),s("li",[t._v("应用场景:\n"),s("ol",[s("li",[t._v("有些值不应被设置为响应式的，例如复杂的第三方类库等。")]),t._v(" "),s("li",[t._v("当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能。")])])])])])]),t._v(" "),s("h3",{attrs:{id:"_4-customref"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-customref"}},[t._v("#")]),t._v(" 4.customRef")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("作用：创建一个自定义的 ref，并对其依赖项跟踪和更新触发进行显式控制。")])]),t._v(" "),s("li",[s("p",[t._v("实现防抖效果：")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-model")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("keyword"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{keyword}}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("customRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Demo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// let keyword = ref('hello') //使用Vue准备好的内置ref")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//自定义一个myRef")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("myRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("delay")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" timer\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//通过customRef去实现自定义")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("customRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("track"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("trigger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("track")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//告诉Vue这个value值是需要被“追踪”的")]),t._v("\n\t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value\n\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t\t\t\t\ttimer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t\t\t\tvalue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newValue\n\t\t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("trigger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//告诉Vue去更新界面")]),t._v("\n\t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("delay"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" keyword "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("myreRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用程序员自定义的ref")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tkeyword\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"_5-provide-与-inject"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-provide-与-inject"}},[t._v("#")]),t._v(" 5.provide 与 inject")]),t._v(" "),s("img",{staticStyle:{width:"300px"},attrs:{src:"https://v3.cn.vuejs.org/images/components_provide.png"}}),t._v(" "),s("ul",[s("li",[s("p",[t._v("作用：实现"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("祖与后代组件间")]),t._v("通信")])]),t._v(" "),s("li",[s("p",[t._v("套路：父组件有一个 "),s("code",[t._v("provide")]),t._v(" 选项来提供数据，后代组件有一个 "),s("code",[t._v("inject")]),t._v(" 选项来开始使用这些数据")])]),t._v(" "),s("li",[s("p",[t._v("具体写法：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("祖组件中：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" car "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'奔驰'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("price")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'40万'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("provide")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'car'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("car"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("后代组件中：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("context")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" car "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("inject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'car'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("car"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])])]),t._v(" "),s("h3",{attrs:{id:"_6-响应式数据的判断"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-响应式数据的判断"}},[t._v("#")]),t._v(" 6.响应式数据的判断")]),t._v(" "),s("ul",[s("li",[t._v("isRef: 检查一个值是否为一个 ref 对象")]),t._v(" "),s("li",[t._v("isReactive: 检查一个对象是否是由 "),s("code",[t._v("reactive")]),t._v(" 创建的响应式代理")]),t._v(" "),s("li",[t._v("isReadonly: 检查一个对象是否是由 "),s("code",[t._v("readonly")]),t._v(" 创建的只读代理")]),t._v(" "),s("li",[t._v("isProxy: 检查一个对象是否是由 "),s("code",[t._v("reactive")]),t._v(" 或者 "),s("code",[t._v("readonly")]),t._v(" 方法创建的代理")])]),t._v(" "),s("h2",{attrs:{id:"四、composition-api-的优势"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、composition-api-的优势"}},[t._v("#")]),t._v(" 四、Composition API 的优势")]),t._v(" "),s("h3",{attrs:{id:"_1-options-api-存在的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-options-api-存在的问题"}},[t._v("#")]),t._v(" 1.Options API 存在的问题")]),t._v(" "),s("p",[t._v("使用传统OptionsAPI中，新增或者修改一个需求，就需要分别在data，methods，computed里修改 。")]),t._v(" "),s("div",{staticStyle:{width:"600px",height:"370px",overflow:"hidden",float:"left"}},[s("img",{staticStyle:{width:"600px",float:"left"},attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.image"}})]),t._v(" "),s("div",{staticStyle:{width:"300px",height:"370px",overflow:"hidden",float:"left"}},[s("img",{staticStyle:{zoom:"50%",width:"560px"},attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.image"}})]),t._v(" "),s("h3",{attrs:{id:"_2-composition-api-的优势"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-composition-api-的优势"}},[t._v("#")]),t._v(" 2.Composition API 的优势")]),t._v(" "),s("p",[t._v("我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起。")]),t._v(" "),s("div",{staticStyle:{width:"500px",height:"340px",overflow:"hidden",float:"left"}},[s("img",{staticStyle:{height:"360px"},attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image"}})]),t._v(" "),s("div",{staticStyle:{width:"430px",height:"340px",overflow:"hidden",float:"left"}},[s("img",{staticStyle:{height:"360px"},attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image"}})]),t._v(" "),s("h2",{attrs:{id:"五、新的组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五、新的组件"}},[t._v("#")]),t._v(" 五、新的组件")]),t._v(" "),s("h3",{attrs:{id:"_1-fragment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-fragment"}},[t._v("#")]),t._v(" 1.Fragment")]),t._v(" "),s("ul",[s("li",[t._v("在Vue2中: 组件必须有一个根标签")]),t._v(" "),s("li",[t._v("在Vue3中: 组件可以没有根标签, 内部会将多个标签包含在一个Fragment虚拟元素中")]),t._v(" "),s("li",[t._v("好处: 减少标签层级, 减小内存占用")])]),t._v(" "),s("h3",{attrs:{id:"_2-teleport"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-teleport"}},[t._v("#")]),t._v(" 2.Teleport")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("什么是Teleport？—— "),s("code",[t._v("Teleport")]),t._v(" 是一种能够将我们的"),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("组件html结构")]),t._v("移动到指定位置的技术。")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("teleport")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("移动位置（可以是#id或者直接用标签html、body）"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("isShow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("我是一个弹窗"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("isShow = false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("关闭弹窗"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("teleport")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"_3-suspense"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-suspense"}},[t._v("#")]),t._v(" 3.Suspense")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("等待异步组件时渲染一些额外内容，让应用有更好的用户体验")]),t._v(" "),s("ul",[s("li",[t._v("同步组件：A组件中包含一个B组件，B组件未渲染完成时整个A都不显示")]),t._v(" "),s("li",[t._v("异步组件：A组件中包含一个异步组件B，B组件未渲染完成时A中B不占位")])]),t._v(" "),s("p",[t._v("解决异步组件的问题可以使用Suspense，常见的使用场景：B组件未渲染时显示loading提示")])]),t._v(" "),s("li",[s("p",[t._v("使用步骤：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("异步引入组件")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("defineAsyncComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineAsyncComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./components/Child.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("使用"),s("code",[t._v("Suspense")]),t._v("包裹组件，并配置好"),s("code",[t._v("default")]),t._v(" 与 "),s("code",[t._v("fallback")])]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("我是App组件"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Suspense")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            // 这里的default不允许修改\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-slot:")]),t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-slot:")]),t._v("fallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("加载中....."),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Suspense")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])])])]),t._v(" "),s("h2",{attrs:{id:"六、其他"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#六、其他"}},[t._v("#")]),t._v(" 六、其他")]),t._v(" "),s("h3",{attrs:{id:"_1-全局api的转移"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-全局api的转移"}},[t._v("#")]),t._v(" 1.全局API的转移")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Vue 2.x 有许多全局 API 和配置。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("例如：注册全局组件、注册全局指令等。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//注册全局组件")]),t._v("\nVue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MyButton'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("template")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<button @click=\"count++\">Clicked {{ count }} times.</button>'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//注册全局指令")]),t._v("\nVue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("directive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'focus'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("inserted")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("focus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])]),t._v(" "),s("li",[s("p",[t._v("Vue3.0中对这些API做出了调整：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("将全局的API，即："),s("code",[t._v("Vue.xxx")]),t._v("调整到应用实例（"),s("code",[t._v("app")]),t._v("）上")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("2.x 全局 API（"),s("code",[t._v("Vue")]),t._v("）")]),t._v(" "),s("th",[t._v("3.x 实例 API ("),s("code",[t._v("app")]),t._v(")")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Vue.config.xxxx")]),t._v(" "),s("td",[t._v("app.config.xxxx")])]),t._v(" "),s("tr",[s("td",[t._v("Vue.config.productionTip")]),t._v(" "),s("td",[s("strong",{staticStyle:{color:"#DD5145"}},[t._v("移除")])])]),t._v(" "),s("tr",[s("td",[t._v("Vue.component")]),t._v(" "),s("td",[t._v("app.component")])]),t._v(" "),s("tr",[s("td",[t._v("Vue.directive")]),t._v(" "),s("td",[t._v("app.directive")])]),t._v(" "),s("tr",[s("td",[t._v("Vue.mixin")]),t._v(" "),s("td",[t._v("app.mixin")])]),t._v(" "),s("tr",[s("td",[t._v("Vue.use")]),t._v(" "),s("td",[t._v("app.use")])]),t._v(" "),s("tr",[s("td",[t._v("Vue.prototype")]),t._v(" "),s("td",[t._v("app.config.globalProperties")])])])])])])])]),t._v(" "),s("h3",{attrs:{id:"_2-其他改变"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-其他改变"}},[t._v("#")]),t._v(" 2.其他改变")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("data选项应始终被声明为一个函数。")])]),t._v(" "),s("li",[s("p",[t._v("过度类名的更改：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Vue2.x写法")]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".v-enter,\n.v-leave-to")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("opacity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".v-leave,\n.v-enter-to")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("opacity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("Vue3.x写法")]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".v-enter-from,\n.v-leave-to")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("opacity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".v-leave-from,\n.v-enter-to")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("opacity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])]),t._v(" "),s("li",[s("p",[s("strong",{staticStyle:{color:"#DD5145"}},[t._v("移除")]),t._v("keyCode作为 v-on 的修饰符，同时也不再支持"),s("code",[t._v("config.keyCodes")])])]),t._v(" "),s("li",[s("p",[s("strong",{staticStyle:{color:"#DD5145"}},[t._v("移除")]),s("code",[t._v("v-on.native")]),t._v("修饰符")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("父组件中绑定事件")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("my-component")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-on:")]),t._v("close")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("handleComponentEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-on:")]),t._v("click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("handleNativeClickEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("子组件中声明自定义事件")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("emits")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'close'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])])]),t._v(" "),s("li",[s("p",[s("strong",{staticStyle:{color:"#DD5145"}},[t._v("移除")]),t._v("过滤器（filter）")]),t._v(" "),s("blockquote",[s("p",[t._v("过滤器虽然这看起来很方便，但它需要一个自定义语法，打破大括号内表达式是 “只是 JavaScript” 的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器。")])])]),t._v(" "),s("li",[s("p",[t._v("......")])])]),t._v(" "),s("h2",{attrs:{id:"vue3-setup语法糖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue3-setup语法糖"}},[t._v("#")]),t._v(" vue3 setup语法糖")]),t._v(" "),s("h2",{attrs:{id:"vue3源码分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue3源码分析"}},[t._v("#")]),t._v(" vue3源码分析")]),t._v(" "),s("h2",{attrs:{id:"常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")])])}),[],!1,null,null,null);a.default=n.exports}}]);